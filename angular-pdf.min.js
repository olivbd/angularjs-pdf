/*!
 * Angular-PDF: An Angularjs directive <ng-pdf> to display PDF in the browser with PDFJS.
 * @version 3.0.0
 * @link https://github.com/olivbd/angular-pdf#readme
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define("pdf",["angular"],t):"object"==typeof exports?exports.pdf=t(require("angular")):e.pdf=t(e.angular)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="./src/angular-pdf.module.js")}({"./src/angular-pdf.directive.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NgPdf=["$window","$document","$log",function(e,t,n){"ngInject";var r=function(t){var n=t.getContext("2d");return(e.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)},o=function(e,t,n){var o=r(e);return e.width=Math.floor(t*o),e.height=Math.floor(n*o),e.style.width=Math.floor(t)+"px",e.style.height=Math.floor(n)+"px",e.getContext("2d").setTransform(o,0,0,o,0,0),e},a=function(e,t){angular.element(t).addClass("rotate0");var n=e.find("canvas");0===n.length?e.append(t):n.replaceWith(t)};return{restrict:"E",scope:{pdf:"=",onerror:"&?",onload:"&?",onpagerender:"&?",onpassword:"&?",onprogress:"&?"},link:function(r,i,d){var u=null,l=null,f=!1,p=null,c="1"===d.limitcanvasheight,s=t[0].createElement("canvas");a(i,s),f=!!d.hasOwnProperty("debug")&&d.debug;var g=s.getContext("2d"),h=angular.element(e);i.css("display","block"),h.on("scroll",function(){r.$apply(function(){r.scroll=h[0].scrollY})}),PDFJS.disableWorker=!0,r.renderPage=function(e){u&&u._internalRenderTask.cancel(),p.getPage(e).then(function(e){var t=void 0,a=void 0,d=void 0;if("page-fit"===r.pdf.scale){t=e.getViewport(1);var l=i[0].getBoundingClientRect();a=l.width/t.width,c&&(a=Math.min(a,l.height/t.height)),r.pdf.scale=a}t=e.getViewport(r.pdf.scale),o(s,t.width,t.height),d={canvasContext:g,viewport:t},u=e.render(d),u.promise.then(function(){angular.isFunction(r.onpagerender)&&r.onpagerender()}).catch(function(e){n.log(e)})})};var v=function(){g&&g.clearRect(0,0,s.width,s.height)},P=function(){console.log("renderPDF"),v();var e={url:r.pdf.url,withCredentials:r.pdf.usecredentials};r.pdf.httpHeaders&&(e.httpHeaders=r.pdf.httpHeaders),r.pdf.url&&r.pdf.url.length&&(l=PDFJS.getDocument(e),l.onProgress=function(e){angular.isFunction(r.onprogress)&&r.onprogress({progressData:e})},l.onPassword=function(e,t){angular.isFunction(r.onpassword)&&r.onpassword({updatePasswordFn:e,passwordResponse:t})},l.then(function(e){angular.isFunction(r.onload)&&r.onload(),p=e,r.renderPage(r.pdf.page),r.$apply(function(){r.pdf.pageCount=e.numPages})},function(e){e&&angular.isFunction(r.onerror)&&r.onerror({error:e})}))};r.$watch("pdf.url",function(e,t){""!==e&&(f&&n.log("pdfUrl value change detected: ",r.pdf.url),r.pdf.page=1,r.pdf.rotate=0,l?l.destroy().then(function(){P()}):P())}),r.$watch("pdf.page",function(){r.pdf.page<1||!r.pdf.page?r.pdf.page=1:r.pdf.page>r.pdf.pageCount&&(r.pdf.page=r.pdf.pageCount),null!==p&&r.renderPage(r.pdf.page)}),r.$watch("pdf.rotate",function(){void 0!==r.pdf.rotate&&s.setAttribute("class","rotate"+r.pdf.rotate)}),r.$watch("pdf.scale",function(){r.pdf.scale&&null!==p&&r.renderPage(r.pdf.page)})}}}]},"./src/angular-pdf.module.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pdf=void 0;var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n("./src/angular-pdf.directive.js"),i=t.Pdf=o.default.module("pdf",[]).directive("ngPdf",a.NgPdf).name;t.default=i},0:function(t,n){t.exports=e}})});
//# sourceMappingURL=angular-pdf.min.js.map